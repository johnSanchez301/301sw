(function(e){e.fn.upload_single_image=function(t){var n={callback:null};t=e.extend({},n,t);e(this).on("click",function(){var n=e(this),r=wp.media.editor.send.attachment;wp.media.editor.send.attachment=function(e,i){var s=e.size;var o=i.sizes[s].url;n.parent().find(".image-url").val(o);n.parent().find(".img-preview").html("<img src='"+o+"' >");n.parent().find(".ui-wrapper").css("width",i.width);n.parent().find(".ui-wrapper").css("height",i.height);var u=n.parent().parent().parent();u.find(".awe-resize-image-width").val(i.width);u.find(".awe-resize-image-height").val(i.height);console.log(i.height+" and "+i.width);if(typeof t.callback=="function"){t.callback({current:n,image_url:o})}wp.media.editor.send.attachment=r};wp.media.editor.open();return false});var r=e(this).parent().find(".image-url");r.on("change keyup",function(){var t=e(this).val();if(t!=undefined&&t!="")e(this).parent().find(".img-preview").html("<img src='"+t+"' >");else e(this).parent().find(".img-preview").html("")})};e.fn.spectrumPicker=function(t){var n={callback:null};t=e.extend({},n,t);e(this).spectrum({showButtons:false,allowEmpty:true,showInput:true,showInitial:true,showAlpha:true,containerClassName:"spb-spectrum",replacerClassName:"spb-pickercolor",move:function(n){if(n)n=n.toRgbString();else n="";if(typeof t.callback=="function"){t.callback({current:e(this),color:n})}},hide:function(n){if(n)n=n.toRgbString();else n="";if(typeof t.callback=="function"){t.callback({current:e(this),color:n})}}})};e.fn.remove_upload_image=function(t){var n={callback:null};t=e.extend({},n,t);e(this).on("click",function(){e(this).parent().find("input:hidden.image-url").val("");e(this).parent().find(".img-preview").html("");if(typeof t.callback=="function"){t.callback({current:e(this)})}return false})};e.fn.upload_multi_image=function(t){var n={callback:null};t=e.extend(n,t);var r;e(this).on("click",function(){var n=e(this);if(r){r.open();return false}r=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:true});r.on("select",function(){selection=r.state().get("selection");var e=[],i=[];selection.map(function(t){t=t.toJSON();e.push(t.id);i.push(t.url)});var s="";for(var o=0;o<i.length;o++){s+='<img src="'+i[o]+'">'}if(s!="")n.parent().find(".img-previews").html(s);n.parent().find("input.multi-image-url").val(JSON.stringify(i));if(typeof t.callback=="function"){t.callback({self:n,urls:i})}});r.open();return false})};e.fn.upload_multi_images=function(t){var n={callback:null};t=e.extend(n,t);var r;e(this).on("click",function(){var n=e(this);if(r){r.open();return false}r=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:true});r.on("select",function(){selection=r.state().get("selection");var e=[],i=[];selection.map(function(t){t=t.toJSON();e.push(t.id);i.push(t.url)});var s="";for(var o=0;o<i.length;o++){s+='<div class="img-thumbail"><img src="'+i[o]+'"><span class="js-del fa fa-times"></span></div>'}if(s!="")n.parent().find(".img-previews").append(s);var u=n.parent().find("input.multi-image-url");images=JSON.parse(u.val());for(var o=0;o<i.length;o++){images.push(i[o])}u.val(JSON.stringify(images));if(typeof t.callback=="function"){t.callback({self:n,urls:i})}});r.open();return false})};e.fn.imageSort=function(t){var n={callback:null};t=e.extend({},n,t);e(this).sortable({update:function(n,r){var i=[];e(this).find("img").each(function(){var t=e(this).attr("src");i.push(t)});e(this).parent().find(".multi-image-url").val(JSON.stringify(i));if(typeof t.callback=="function"){t.callback({current:e(this)})}}})};e.fn.removeImage=function(t){var n={callback:null};t=e.extend({},n,t);e(this).on("click",function(){var n=e(this).parent().parent();e(this).parent().remove();var r=[];n.find("img").each(function(){var t=e(this).attr("src");r.push(t)});n.parent().find(".multi-image-url").val(JSON.stringify(r));if(typeof t.callback=="function"){t.callback({current:e(this)})}return false})};e.fn.remove_multi_upload_image=function(t){var n={callback:null};t=e.extend({},n,t);e(this).on("click",function(){e(this).parent().find("input.multi-image-url").val("");e(this).parent().find(".img-previews").html("");if(typeof t.callback=="function"){t.callback({current:e(this)})}return false})};e(window).load(function(){var t="mytabs";e(".md-tabs").tabs({active:e.cookie(t)||0,activate:function(n,r){var i=r.newTab.parent().children().index(r.newTab);e.cookie(t,i,{expires:1})}});var n="mysubtabs";e(".md-sub-tabs").tabs({active:e.cookie(n)||0,activate:function(t,r){var i=r.newTab.parent().children().index(r.newTab);e.cookie(n,i,{expires:1})}});var r="mysubsubtabs";e(".md-subtabs").tabs({active:e.cookie(r)||0,activate:function(t,n){var i=n.newTab.parent().children().index(n.newTab);e.cookie(r,i,{expires:1})}});e(".md-accordion-wrapper").accordion({collapsible:true,active:false,heightStyle:"content"});e(".click-disable").on("click",function(){e(this).parent().addClass("disabled");e(this).parent().find(".input-checkbox").removeAttr("checked")});e(".click-enable").on("click",function(){e(this).parent().removeClass("disabled");e(this).parent().find(".input-checkbox").attr("checked","checked")});e("#slider-range-min").slider({range:"min",value:100,min:1,max:700,slide:function(t,n){e("#amount").val(n.value)}});e("#amount").val(e("#slider-range-min").slider("value"));e(".md-accordion-item .md-field").accordion({collapsible:true,active:false});e("#md-block-enabled, #md-block-disabled, #md-block-backup").sortable({placeholder:"placeholder",revert:true});e("#md-block-enabled, #md-block-disabled, #md-block-backup").disableSelection();e(".choose-color").wpColorPicker({color:false,border:true,controls:{horiz:"s",vert:"l",strip:"h"}});if(e(".upload-img").length){e(".upload-img").upload_single_image();e(".remove-img").remove_upload_image()}if(e(".upload-multi-img").length){e(".upload-multi-img").upload_multi_image();e(".remove-multi-img").remove_multi_upload_image()}})})(jQuery)