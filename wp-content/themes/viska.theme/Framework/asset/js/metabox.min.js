(function(e){e(window).load(function(){function c(t){var n=["audio","gallery","link","quote","video"];for(var r=0;r<n.length;r++){if(n[r]==t)e(".awe-media-"+n[r]).fadeIn();else e(".awe-media-"+n[r]).fadeOut()}}function p(){var t=[];e(".awe-pricing ul li").each(function(){var n=[];e(this).find(".awe-pricing-offer-items").find(".awe-pricing-offer-item").each(function(){if(e(this).find("input.pricing-offer-item").val()!=""&&e(this).find("input.pricing-offer-item").val()!=undefined)n.push(e(this).find("input.pricing-offer-item").val())});var r={price:e(this).find(".pricing-price").val(),title:e(this).find(".pricing-title").val(),desc:e(this).find(".pricing-desc").val(),url:e(this).find(".pricing-url").val(),currency:e(this).find(".pricing-currency").val(),time:e(this).find(".pricing-time").val(),offers:n};t.push(r)});e(".pricing-value").val(JSON.stringify(t))}e(".upload-resume").on("click",function(){var t=e(this);var n=wp.media.editor.send.attachment;wp.media.editor.send.attachment=function(e,r){t.parent().find("input:text").val(r.url);wp.media.editor.send.attachment=n};wp.media.editor.open();return false});e("body").on("click",".photo",function(){var t=e(this);var n=wp.media.editor.send.attachment;wp.media.editor.send.attachment=function(e,r){var i=e.size;var s=r.sizes[i].url;t.parent().find("input[class=input-photo]").val(s);t.find("img").attr("src",s);wp.media.editor.send.attachment=n};wp.media.editor.open();return false});e("a.md-popup-close").on("click",function(){e("div.choose-icon-font").fadeOut()});var t=null;var n=null;var r=null;var i=false;e("body").on("click","a.choose-icon",function(){t=e(this).find("i");i=true;e("div.choose-icon-font").show();n=t.attr("class");if(n!=undefined){e("i#current-icon").removeClass();e("i#current-icon").addClass(n)}r=n;e("div.list-font-icon").find("i[class='"+n+"']").parent().addClass("choose");return false});e("div.list-font-icon li").on("click",function(){if(i==false)return;r=e(this).find("i").attr("class");e("i#current-icon").removeClass();e("i#current-icon").addClass(r);e("div.list-font-icon li").removeClass("choose");e(this).addClass("choose");return false});e("a.md-popup-save").on("click",function(){if(i==false)return;e("div.list-font-icon li").removeClass("choose");t.parent().parent().find("input.input-icon").val(r);t.removeClass(n);t.attr("class",r);e("div.choose-icon-font").fadeOut();return false});var s='<a href="#" class="remove-feature fa fa-times"></a>';e("body").on("click",".remove-feature",function(t){t.preventDefault();var n=e(this).clone();e(this).parent().prev().append(n);e(this).parent().remove();return true});e(".awe-feature-all-items div.awe-feature-item:last-child").append(s);e("body").on("click",".awe-feature-logo-option input",function(){e(this).parent().parent().find(".awe-feature-logo-preview").children("div").hide();switch(e(this).val()){case"none":e(this).parent().parent().find(".awe-feature-logo-none").show();break;case"icon":e(this).parent().parent().find(".awe-feature-logo-icon").show();break;case"image":e(this).parent().parent().find(".awe-feature-logo-image").show();break}return true});e("input.feature-add-more").on("click",function(){var t=e(".awe-feature-all-items div.awe-feature-item:last-child");if(t!=undefined&&(t.find(".awe-feature-title input").val()==""||t.find(".awe-feature-desc textarea").val()=="")){alert("Please fill required info before add more")}else{var n=e(".awe-feature-all-items div.awe-feature-item:last-child").attr("num");if(n==undefined)n=0;var r=e(".feature-clone").clone();var i=e(".feature-clone").attr("feature-name");e(".awe-feature-all-items div").find("a.remove-feature").remove();n++;r.attr("num",n);r.find(".awe-feature-logo-option").children("input").attr("name",i+"[features]["+n+"][logo_type]");r.find(".awe-feature-logo-preview").find(".input-photo").attr("name",i+"[features]["+n+"][logo_img]");r.find(".awe-feature-logo-preview").find(".input-icon").attr("name",i+"[features]["+n+"][logo_icon]");r.find(".awe-feature-title input").attr("name",i+"[features]["+n+"][title]");r.find(".awe-feature-desc textarea").attr("name",i+"[features]["+n+"][desc]");r.append(s);r.removeAttr("feature-name").removeAttr("style").removeClass("feature-clone");e(".awe-feature-all-items").append(r)}return true});var o='<a title="Delete" href="#" class="media-modal-close remove-skill"><span class="media-modal-icon"></span></a>';e("div.all-skills div.skill-item").last().append(o);e("body").on("click",".remove-skill",function(t){t.preventDefault();var n=e(this).clone();e(this).parent().prev().append(n);e(this).parent().remove();return true});e(".skill-add-more").on("click",function(){var t=e("div.all-skills div.skill-item").last();if(t!=undefined&&t.find("input.skill-name").val()==""){alert("Please fill required info before add more")}else{var n=e("div.all-skills div.skill-item").last().attr("num");var r=e(".skill-clone").attr("skill-name");if(n==undefined)n=0;var i=e(".skill-clone").clone();e(".all-skills div").find("a.remove-skill").remove();n++;i.attr("num",n);i.find("input.input-icon").attr("name",r+"[skills]["+n+"][icon]");i.find("input.skill-name").attr("name",r+"[skills]["+n+"][name]");i.find("input.skill-desc").attr("name",r+"[skills]["+n+"][desc]");i.find("input.skill-pro").attr("name",r+"[skills]["+n+"][pro]");i.append(o);i.removeAttr("skill-name").removeAttr("style").removeClass("skill-clone");i.find(".chart").easyPieChart({animate:1,onStep:function(t,n,r){e(this.el).find(".percent").text(Math.round(r))}});i.find("input.skill-pro").val("0");i.find(".skill-range").slider({range:"min",min:0,max:100,value:0,slide:function(t,n){e(this).closest(".skill-item").find(".skill-pro").val(n.value);if(e(this).parent().find(".chart").data("easyPieChart"))e(this).parent().find(".chart").data("easyPieChart").update(n.value)}});e(".all-skills .clear").before(i)}return true});e(document).ready(function(){e(".skill-range").slider({range:"min",min:0,max:100,value:50,slide:function(t,n){e(this).closest(".skill-item").find(".skill-pro").val(n.value);if(e(this).parent().find(".chart").data("easyPieChart"))e(this).parent().find(".chart").data("easyPieChart").update(n.value)}});e(".skill-pro").each(function(){e(this).parent().find(".skill-range").slider("value",e(this).val())});e(".chart").easyPieChart({animate:1,onStep:function(t,n,r){e(this.el).find(".percent").text(Math.round(r))}})});var u='<a title="Delete" href="#" class="fa fa-trash-o remove-funfact"></a>';e(".all-funfacts .funfact-item:last-child").append(u);e("body").on("click",".remove-funfact",function(t){t.preventDefault();var n=e(this).clone();e(this).parent().prev().append(n);e(this).parent().remove();return true});e(".funfact-add-more").on("click",function(){var t=e("body").find(".all-funfacts div.funfact-item:last-child");if(t!=undefined&&(t.find("input.funfact-title").val()==""||t.find("input.funfact-total").val()=="")){alert("Please fill required info before add more")}else{var n=e(".all-funfacts div.funfact-item:last-child").attr("num");var r=e(".funfact-clone").attr("funfact-name");if(n==undefined)n=0;var i=e(".funfact-clone").clone();e(".all-funfacts div").find("a.remove-funfact").remove();n++;i.attr("num",n);i.find("input.input-icon").attr("name",r+"[funfacts]["+n+"][icon]");i.find("input.funfact-title").attr("name",r+"[funfacts]["+n+"][name]");i.find("input.funfact-total").attr("name",r+"[funfacts]["+n+"][total]");i.append(u);i.removeAttr("funfact-name").removeAttr("style").removeClass("funfact-clone");e(".all-funfacts").append(i)}return true});var a='<a title="Delete" href="#" class="media-modal-close remove-resume"><span class="media-modal-icon"></span></a>';e(".awe-resume-all-items div.awe-resume-item:last-child").append(a);e("body").on("click",".remove-resume",function(t){t.preventDefault();var n=e(this).clone();e(this).parent().prev().append(n);e(this).parent().remove();return true});e(".resume-add-more").on("click",function(){var t=e(".awe-resume-all-items div.awe-resume-item:last-child");console.log(t.find(".awe-resume-item-time input"));if(t!=undefined&&(t.find(".awe-resume-item-time input").val()==""||t.find(".awe-resume-item-title input").val()==""||t.find(".awe-resume-item-desc textarea").val()=="")){alert("Please fill required info before add more")}else{var n=e(".awe-resume-all-items div.awe-resume-item:last-child").attr("num");var r=e(".resume-clone").attr("resume-name");if(n==undefined)n=0;var i=e(".resume-clone").clone();e(".awe-resume-all-items div").find("a.remove-resume").remove();n++;i.attr("num",n);i.find("input.resume-time").attr("name",r+"[resumes]["+n+"][time]");i.find("select.resume-type").attr("name",r+"[resumes]["+n+"][type]");i.find("input.resume-title").attr("name",r+"[resumes]["+n+"][title]");i.find("input.resume-position").attr("name",r+"[resumes]["+n+"][position]");i.find("textarea.resume-desc").attr("name",r+"[resumes]["+n+"][desc]");i.append(a);i.removeAttr("resume-name").removeAttr("style").removeClass("resume-clone");e(".awe-resume-all-items").append(i)}return true});e("select[name='awe_media[media_type]']").on("click change",function(){c(e(this).val())});var f=["audio","gallery","link","quote","video","image"];for(var l=0;l<f.length;l++){e("#post-format-"+f[l]).on("click checked",function(){var t=e(this).attr("id");t=t.replace("post-format-","");if(t=="image")t="gallery";e("select[name='awe_media[media_type]']").val(t);c(t)})}var h;e(".media-add-gallery").on("click",function(){var t=e(this);if(h){h.open();return}h=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:true});h.on("select",function(){selection=h.state().get("selection");var t=[],n=[];selection.map(function(e){e=e.toJSON();t.push(e.id);n.push(e.url)});var r="",i=e(".awe-media").attr("media-name");for(var s=0;s<n.length;s++){r+='<div class="item"><img src="'+n[s]+'"><input type="hidden" name="'+i+'[gallery][]" value="'+n[s]+'"><span class="dashicons dashicons-no-alt del-image"></span></div>'}if(r!=""){e(".awe-media-gallery").find(".content .image-none").remove();e(".awe-media-gallery").find(".content").append(r)}});h.open()});e.fn.extend({get_video:function(){function t(e){var t=e.match(/youtube.com\/watch\?v=([a-zA-Z0-9\-_]+)/);if(e.indexOf("youtube.com")>-1)return true;if(e.indexOf("youtu.be")>-1)return true;return false}function n(e){if(e.indexOf("vimeo.com")>-1)return true;return false}e(this).on("click",function(){var r=e("input.awe-new-video-url").val(),i=e(".awe-media").attr("media-name");if(t(r)){var s=r.match("[\\?&]v=([^&#]*)"),o={},u="";o={type:"youtube",id:s[1],image:"http://i.ytimg.com/vi/"+s[1]+"/hqdefault.jpg"};console.log(JSON.stringify(o));u='<div class="item"><img src="'+o["image"]+'">';u+='<input type="hidden" value=\''+JSON.stringify(o)+"' name=\""+i+'[videos][]" >';u+='<div class="dashicons dashicons-video-alt3 pattern"></div>';u+='<span class="dashicons dashicons-no-alt del-image"></span></div>';e(".awe-media-video").find(".content .video-none").remove();e(".awe-media-video").find(".content").append(u);return}if(n(r)){var a,f=r.match(/^.+vimeo.com\/(.*\/)?([^#\?]*)/),o={},u="";a=f?f[2]||f[1]:null;if(a!=undefined){e.getJSON("http://www.vimeo.com/api/v2/video/"+a+".json?callback=?",{format:"json"},function(t){o={type:"vimeo",id:a,image:t[0].thumbnail_large};u='<div class="item"><img src="'+t[0].thumbnail_large+'">'+'<input type="hidden" name="'+i+"[videos][]\" value='"+JSON.stringify(o)+"'>"+'<div class="dashicons dashicons-video-alt3 pattern"></div>'+'<span class="dashicons dashicons-no-alt del-image"></span></div>';e(".awe-media-video").find(".content .video-none").remove();e(".awe-media-video").find(".content").append(u)})}else alert("Can not get Vimeo ID");return}alert("Video URL invalid")});}});e("body").on("click",".awe-media-gallery span.del-image",function(){var t=e(".awe-media").attr("media-name");if(e(this).closest(".content").find(".item").length==1)e(this).closest(".content").append('<div class="image-none"><input type="hidden" name="'+t+'[gallery]" value=""><img src="'+AWEURL+'asset/images/image-none.png"></div>');e(this).parent().remove()});e("body").on("click",".awe-media-video span.del-image",function(){var t=e(".awe-media").attr("media-name");if(e(this).closest(".content").find(".item").length==1)e(this).closest(".content").append('<div class="item video-none"><input type="hidden" name="'+t+'[gallery]" value=""><img src="'+AWEURL+'asset/images/video-none.png"></div>');e(this).parent().remove()});e("input.media-add-video").get_video();e(document).ready(function(){e(".awe-audio-link").on("change keyup",function(){e(".awe-audio-preview").html('<div id="soundcloud-preview"></div>');var t=e("input.awe-audio-link").val(),n=e("input.awe-audio-auto-play:checked").val();var r=t.indexOf("/sets/")!=-1?"450px":"160px";if(t!=undefined&&t!="")SC.oEmbed(t,{color:"ff0066",auto_play:n,maxheight:r},document.getElementById("soundcloud-preview"))});e(".awe-audio-auto-play").on("click",function(){e(".awe-audio-preview").html('<div id="soundcloud-preview"></div>');var t=e("input.awe-audio-link").val(),n=e("input.awe-audio-auto-play:checked").val();var r=t.indexOf("/sets/")!=-1?"450px":"160px";if(t!=undefined&&t!="")SC.oEmbed(t,{color:"ff0066",auto_play:n,maxheight:r},document.getElementById("soundcloud-preview"))})});e("input.offer-add-more").on("click",function(){var t=e("div.awe-offer-fields").find(".offer-item").last().find("input");if(t.val()==""||t.val()==undefined){alert("Please fill required info before add more")}else e("div.awe-offer-fields").append('<div class="offer-item"><input type="text" class="medium" name="awe_offer[offer][]" value=""><a href="#" class="remove-offer">Delete</a></div>');return false});e("body").on("click",".remove-offer",function(){e(this).parent().remove();return false});e("input[id=show-price]").on("click",function(){if(e(this).is(":checked"))e(".awe-offer-price").show();else e(".awe-offer-price").hide()});e("#pricing-sortable").sortable({update:function(e,t){p()}});if(e(".awe-pricing ul").find("li").length==0){clone=e(".awe-pricing-addmore").find(".clone").clone();clone.removeAttr("style").removeClass("clone");e(".awe-pricing ul").append(clone)}e(".pricing-add-more").on("click",function(){var t=true;e(".awe-pricing ul").find("li").last().find("input:text").each(function(){if(e(this).val()==""||e(this).val()==undefined){alert("Please fill required fields");t=false;console.log(e(this).val());return false}});if(t){clone=e(this).parent().find(".clone").clone();clone.removeAttr("style").removeClass("clone");e(".awe-pricing ul").append(clone)}return false});e("body").on("click",".pricing-offer-remove",function(){e(this).closest(".awe-pricing-offer-item").remove();p();return false});e("body").on("click",".pricing-item-remove",function(){e(this).closest("li").remove();p();return false});e("body").on("click",".pricing-item-clone",function(){var t=e(this).closest("li").clone();e(this).closest("li").after(t);p();return false});e("body").on("click",".pricing-offer-add",function(){e(this).parent().find(".awe-pricing-offer-items").append('<div class="awe-pricing-offer-item"><input type="text" class="pricing-offer-item"><a href="#" class="pricing-offer-remove fa fa-trash-o"></a></div>')});e("body").on("change keyup",".pricing-price,.pricing-title,.pricing-desc,.pricing-offer-item,.pricing-url,.pricing-currency,.pricing-time",function(){p()})})})(jQuery)