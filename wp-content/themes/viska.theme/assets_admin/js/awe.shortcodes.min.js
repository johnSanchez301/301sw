(function(e,t,n,r){"use strict";function i(){var e={c:"a",d:"b"};var t;var n=0;var r=[];for(t in e){if(t=="c"){console.log(r.push(n))}}}tinymce.PluginManager.add("awe_mce_button",function(t,n){t.addButton("awe_mce_button",{text:"AWE Shortcodes",icon:false,type:"menubutton",menu:[{text:"Buttons",onclick:function(){e("#awe_sc_button").dialog("open");e("#awe_sc_button").removeClass("hidden")}},{text:"Alerts",onclick:function(){e("#awe_sc_alert").dialog("open");e("#awe_sc_alert").removeClass("hidden")}},{text:"Tabs",onclick:function(){e("#awe_sc_tabs").dialog("open");e("#awe_sc_tabs").removeClass("hidden")}},{text:"Accordion",onclick:function(){e("#awe_sc_toggle").dialog("open");e("#awe_sc_toggle").removeClass("hidden")}},{text:"Dropcap",onclick:function(){e("#awe_sc_dropcap").dialog("open");e("#awe_sc_dropcap").removeClass("hidden")}},{text:"List Style",onclick:function(){e("#awe_sc_liststyle").dialog("open");e("#awe_sc_liststyle").removeClass("hidden")}},{text:"Progress Bar",onclick:function(){e("#awe_sc_progress_bar").dialog("open");e("#awe_sc_progress_bar").removeClass("hidden")}},{text:"Video",onclick:function(){e("#awe_sc_embed_video").dialog("open");e("#awe_sc_embed_video").removeClass("hidden")}}]})});e(".awe_shorcode_dialog").dialog({autoOpen:false,modal:true,dialogClass:"awe-shortcode"});e(".color_picker").spectrum({flat:false,showInput:true,showAlpha:true,className:"full-spectrum",preferredFormat:"hex",showButtons:false,move:function(t){var n=t.toRgbString();var r,i;r=e(this).data("target");i=e(this).data("change");if(i=="color"){e(r).css({color:n})}else{e(r).css({"background-color":n})}}});e(".awe_sc_builder .select").change(function(){var t,n,r,i,s,o,u,a,f="",l=[],c;t=e(this).data("type");n=e(this).find(":selected").attr("value");s=e(this).data("target");a=e(this).attr("name");r=t.search("|")!=-1?true:false;if(r){o=t.split("|");i=o[0];u=o[1]}var h=e(this).closest(".awe_shorcode_dialog").find(s);if(u!=""){if(u=="class"){var p=h.attr("class");var d=p.indexOf("btn-default");e(this).children().each(function(){p=p.replace(e(this).attr("value"),"")});p=p+" "+n;h.attr("class",p)}else{h[i](u,n)}}else{h[i](n)}});e(n).on("mouseover",".awe_chooseicon.thickbox",function(){var t=e(this),r="";e(n).on("click","#fa-table-list li",function(){r=e(this).children().attr("class");t.next().val(r);tb_remove()})});e(n).on("focus",".awe_sc_builder .keypress",function(){var t,n,r,i,s,o;t=e(this).data("target");n=e(this).data("type");if(typeof n!="undefined"){r=n.search("|")!=-1?true:false;if(r){i=n.split("|");s=i[0];o=i[1]}}else{n="text"}e(this).on("keydown keyup",function(){if(n=="text"){e(t).text(e(this).val())}else{e(t)[s](o,e(this).val())}})});e(n).on("focus",".awe_sc_builder .using_ajax",function(t){t.preventDefault();var n=e(this),r=e(this).data("render"),i=""});e(n).on("click",".awe_live_preview",function(){e(this).text("Refresh");var t="",n="",r,i,s;var o=e(this);t=e(this).siblings(".awe-settings").find(".awe_content").val();r=typeof e(this).siblings(".awe-settings").find(".awe_icon").val()!="undefined"?e(this).siblings(".awe-settings").find(".awe_icon").val():"";i=typeof e(this).siblings(".awe-settings").find(".color_picker").val()!="undefined"?e(this).siblings(".awe-settings").find(".color_picker").val():"";s=typeof e(this).siblings(".awe-settings").find(".effect_processbar").val()!="undefined"?e(this).siblings(".awe-settings").find(".effect_processbar").val():"";n=e(this).data("render");e.ajax({url:ajaxurl,type:"POST",data:{action:"shortcode_machine",render:n,content:t,icon:r,color:i,effect:s},success:function(t){switch(n){case"tabs":o.siblings(".awe-preview").html(t);e(".awe_tabs").tabs();break;case"accordion":o.siblings(".awe-preview").html(t);e(".awe_accordion").accordion();break;case"liststyle":e("#awe_liststyle_preview").html(t);break;case"progressbar":o.siblings(".awe-preview").html(t);break}}})});e(n).on("change",".effect_processbar",function(){var t=e(this).find(":selected").attr("value"),n="";n=e(this).closest(".awe-settings").siblings(".awe-preview");if(n.find(".progress").length>0){n.find(".progress").each(function(){switch(t){case"":e(this).find(".progress-bar").removeClass("active progress-bar-striped");break;case"progress-bar-striped":e(this).find(".progress-bar").removeClass("active").addClass("progress-bar-striped");break;default:e(this).find(".progress-bar").addClass("progress-bar-striped active");break}})}});e(n).on("click",".awe_insert_shortcode",function(){var t="",n=e(this).siblings(".awe-settings"),r="",i="",s;i=n.data("shortcodename");s=typeof n.data("dontreplacecontnet")!="undefined"?true:false;if(s==false){n.wrap("<form method='POST' action=''></form>");t=n.parent().serializeArray();n.unwrap("form");r+="["+i;e(t).each(function(e,t){if(typeof t!="undefined"&&typeof t.value!="undefined"&&typeof t.name!="undefined"){r+=" "+t.name+"="+'"'+t.value+'"'}});r+=" ]"}else{r+="["+i+"";if(n.find(".awe_style").length>0){n.find(".awe_style").each(function(){r+=" "+e(this).attr("name")+'="'+e(this).val()+'"'})}r+=" ]";r+=n.find(".awe_content").val();r+="[/"+i+"]"}tinyMCE.activeEditor.execCommand("mceInsertContent",false,r);e("#"+e(this).closest(".awe_sc_builder").attr("id")).dialog("close")});e(n).on("click",".awe_add_video",function(){var t=e(this).prev().attr("value"),n="",r=e(this);n=e.AWE_MEDIA.init({url:t});if(typeof n!="undefined"){if(n.type=="vimeo"){var i,s;e.getJSON("http://www.vimeo.com/api/v2/video/"+n.id_vimeo+".json?callback=?",{format:"json"},function(e){s={type:"vimeo",src:"//player.vimeo.com/video/"+n.id_vimeo,image:e[0].thumbnail_large};i='<img width="128" height="128" src="'+s.image+'">';r.next().val(s.src);r.parent().siblings(".awe-preview").html(i)})}else{e(this).next().val(n.src);e(this).parent().siblings(".awe-preview").html(n.image)}}})})(jQuery,window,document)