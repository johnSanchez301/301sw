jQuery.download=function(e,t,n){if(e&&t){t=typeof t=="string"?t:jQuery.param(t);var r="";jQuery.each(t.split("&"),function(){var e=this.split("=");r+='<input type="hidden" name="'+e[0]+'" value="'+e[1]+'" />'});jQuery('<form action="'+e+'" method="'+(n||"post")+'">'+r+"</form>").appendTo("body").submit().remove()}};(function(e){e(document).ready(function(){function n(n){var r=/([^\?]+)(\?family=)?([^&\']+)/i;var i=r.exec(n);if(i&&i[3]!=undefined){e("head").append(n);var s=i[3].split("|");e(".choose-font").each(function(){var n=e(this).find(":selected").val(),r="";for(var i in t){if(n==i)r+='<option data-style="'+t[i]+'" value="'+i+'" selected="selected">'+i+"</option>";else r+='<option data-style="'+t[i]+'" value="'+i+'">'+i+"</option>"}for(var o=0;o<s.length;o++){var u=s[o].split(":"),a=u[0].replace("+"," "),f=u[1]?u[1]:"";if(n==i)r+='<option data-style="'+f+'" value="'+a+'" selected="selected">'+a+"</option>";else r+='<option data-style="'+f+'" value="'+a+'">'+a+"</option>"}e(this).html(r)})}}function r(e){var t=["i1","i2","i3","i4","i5","i6","i7","i8","i9","100italic","200italic","300italic","400italic","500italic","600italic","700italic","800italic","900italic"];return t.indexOf(e)!=-1?"italic":"normal"}function i(e){var t={n1:"100",i1:"100",n2:"200",i2:"200",n3:"300",i3:"300",n4:"400",i4:"400",n5:"500",i5:"500",n6:"600",i6:"600",n7:"700",i7:"700",n8:"800",i8:"800",n9:"900",i9:"900",100:"100","100italic":"100",200:"200","200italic":"200",300:"300","300italic":"300",400:"400","400italic":"400",500:"500","500italic":"500",600:"600","600italic":"600",700:"700","700italic":"700",800:"800","800italic":"800",900:"900","900italic":"900","":"400"};return t[e]!=undefined?t[e]:"400"}function s(e){var t={n1:"Thin",i1:"Thin Italic",n2:"Extra Light",i2:"Extra Light Italic",n3:"Light",i3:"Light Italic",n4:"Normal",i4:"Italic",n5:"Medium",i5:"Medium Italic",n6:"Semi Bold",i6:"Semi Bold Italic",n7:"Bold",i7:"Bold Italic",n8:"Extra Bold",i8:"Extra Bold Italic",n9:"Heavy",i9:"Heavy Italic",100:"Thin","100italic":"Thin Italic",200:"Extra Light","200italic":"Extra-Light Italic",300:"Light","300italic":"Light Italic",400:"Normal","400italic":"Italic",500:"Medium","500italic":"Medium Italic",600:"Semi Bold","600italic":"Semi-Bold Italic",700:"Bold","700italic":"Bold Italic",800:"Extra Bold","800italic":"Extra-Bold Italic",900:"Ultra Bold","900italic":"Ultra-Bold Italic","":"Normal"};return t[e]!=undefined?t[e]:"undefined"}function o(t,n){e.ajax({type:"post",url:ajaxurl,data:{action:"awe_add_new_section",method:t,section_key:n},beforeSend:function(){e(".popup-loading").fadeIn()},success:function(t){e(".js-show-popup").fadeIn();e(".js-show-popup").html(t);e(".popup-loading").fadeOut();e("#custom-new-section-background-color").wpColorPicker({defaultColor:false,hide:true,palettes:true});e("#custom-new-section-overlay-color").spectrum({showButtons:false,allowEmpty:true,showInput:true,showInitial:true,showAlpha:true,containerClassName:"spb-spectrum",replacerClassName:"spb-pickercolor"});e(".upload-img").upload_single_image()}})}function u(t,n){e.ajax({type:"post",url:ajaxurl,data:{action:"awe_new_section_content",method:t,data_send:n},beforeSend:function(){},success:function(t){if(t==""){location.reload()}else{e(".message-error").html(t)}}})}e(".import-data").on("click",function(t){t.preventDefault();e("#save-alert").css({opacity:"1",display:"block"});var n=e("textarea.import-data-text").val();e.post(ajaxurl,{action:"import_theme_settings",data:n},function(t,n,r){var i=JSON.parse(t);if(i.type=="success"){e("#save-alert i").removeClass("dashicons-update").addClass("dashicons-yes");setTimeout(function(){e("#save-alert").css({opacity:"0",display:"none"});e("#save-alert i").removeClass("dashicons-yes").addClass("dashicons-update")},1e3);e(".md-alert-boxs").html('<div class="alert-box alert-success"><strong>Success!</strong> Please wait to reload data (^_^)</div>');setTimeout(function(){e(".alert-success").remove()},2e3);setInterval(function(){window.location.href=window.location.href},3e3)}else{e("#save-alert i").removeClass("dashicons-update").addClass("dashicons-no");setTimeout(function(){e("#save-alert").css({opacity:"0",display:"none"});e("#save-alert i").removeClass("dashicons-no").addClass("dashicons-update")},2e3);e(".md-alert-boxs").html('<div class="alert-box alert-error"><strong>Error!</strong> Save Error!</div>');setTimeout(function(){e(".alert-error").remove()},5e3)}})});e(".export-data").on("click",function(t){t.preventDefault();e.download(ajaxurl,"action=export_theme_settings")});e("input[name=save-theme]").click(function(){e("#save-alert").css({opacity:"1",display:"block"});var t=e("#awe_form").serialize();e("#awe_form").find(":checkbox").each(function(){if(e(this).is(":not(:checked)"))t+="&"+encodeURIComponent(e(this).attr("name"))+"=0"});t=JSON.stringify(t);e.post(ajaxurl,{action:"awe_save",data:t,_wpnonce:e("input[name='_wpnonce']").val(),_wp_http_referer:e("input[name='_wp_http_referer']").val()},function(t,n,r){var i=JSON.parse(t);if(i.type=="success"){e("#save-alert i").removeClass("dashicons-update").addClass("dashicons-yes");setTimeout(function(){e("#save-alert").css({opacity:"0",display:"none"});e("#save-alert i").removeClass("dashicons-yes").addClass("dashicons-update")},2e3);e(".md-alert-boxs").html('<div class="alert-box alert-success"><strong>Success!</strong> Save Ok!</div>');setTimeout(function(){e(".alert-success").remove()},5e3)}else{e("#save-alert i").removeClass("dashicons-update").addClass("dashicons-no");setTimeout(function(){e("#save-alert").css({opacity:"0",display:"none"});e("#save-alert i").removeClass("dashicons-no").addClass("dashicons-update")},2e3);e(".md-alert-boxs").html('<div class="alert-box alert-error"><strong>Error!</strong> Save Error!</div>');setTimeout(function(){e(".alert-error").remove()},5e3)}});return false});if(!e("input[name='theme[logo][enable_image]']").is(":checked")){e(".extra-logo-image").hide()}e(".enable-logo-image .click-enable").on("click",function(){e(".extra-logo-image").fadeIn()});e(".enable-logo-image .click-disable").on("click",function(){e(".extra-logo-image").fadeOut()});e(".extra-logo-image .img-preview img").resizable({resize:function(t,n){var r=e(this).parent().parent().parent().parent();r.find(".awe-resize-image-width").val(n.size.width);r.find(".awe-resize-image-height").val(n.size.height)}});e(".upload-logo").upload_single_image({callback:function(t){t.current.parent().find(".img-preview img").resizable({resize:function(t,n){var r=e(this).parent().parent().parent().parent();r.find(".awe-resize-image-width").val(n.size.width);r.find(".awe-resize-image-height").val(n.size.height)}})}});if(!e("input[name='theme[logo][enable_slogan]']").is(":checked")){e(".extra-slogan").hide()}e(".enable-slogan .click-enable").on("click",function(){e(".extra-slogan").fadeIn()});e(".enable-slogan .click-disable").on("click",function(){e(".extra-slogan").fadeOut()});e("select[name='theme[content][archives]']").on("click",function(){if(e(this).val()=="content")e(".limit-content").fadeIn();else e(".limit-content").fadeOut()});e(".md-layout-choose li").on("click",function(){e(".md-layout-choose li.chosen").removeClass("chosen");e(this).addClass("chosen");e(this).parent().parent().find("input").val(e(this).attr("data-name"));return false});e(".md-footer-conent .click-enable").on("click",function(){e(".md-footer-layout").fadeIn()});e(".md-footer-conent .click-disable").on("click",function(){e(".md-footer-layout").fadeOut()});e("input[name='theme[content][feature-image]']").on("click",function(){if(e(this).is(":checked"))e(".md-feature-image").show();else e(".md-feature-image").hide()});e("input.choose-color2").wpColorPicker({defaultColor:false});e("input.choose-color").wpColorPicker({defaultColor:false,change:function(t,n){var r=e(this).val().toString();e(this).closest(".md-tabcontent-row").find(".demo-font p").css("color",r)},clear:function(){e(this).closest(".md-tabcontent-row").find(".demo-font p").css("color","")},hide:true,palettes:true});e("input:checkbox[name*='theme[typography']").on("click",function(){if(e(this).is(":checked")){e(this).closest(".md-tabcontent-row").find(".md-row-element").last().fadeIn();e(this).closest(".md-tabcontent-row").find(".demo-font").fadeIn();e(this).closest(".md-tabcontent-row").find(".apply-for").fadeIn()}else{e(this).closest(".md-tabcontent-row").find(".md-row-element").last().fadeOut();e(this).closest(".md-tabcontent-row").find(".demo-font").fadeOut();e(this).closest(".md-tabcontent-row").find(".apply-for").fadeOut()}});e(".choose-weight").change(function(){var t=e(this).find(":selected");e(this).closest(".md-tabcontent-row").find(".demo-font p").css("font-weight",i(t.val()));e(this).closest(".md-tabcontent-row").find(".demo-font p").css("font-style",r(t.val()));e(this).parent().find("input.font-weight").val(t.val());console.log(r(t.val()))});e(".choose-lineheight").on("change",function(){e(this).closest(".md-tabcontent-row").find(".demo-font p").css("line-height",e(this).val()+"px")});e(".choose-size").on("change",function(){e(this).closest(".md-tabcontent-row").find(".demo-font p").css("font-size",e(this).val()+"px")});e(".choose-font").change(function(){var t=e(this).find(":selected");var n=t.attr("data-style");if(n==""||n==undefined){var r='<option value="" selected="selected"></option>';e(this).closest(".form-inline").find("input.font-style").val("");e(this).closest(".form-inline").find("input.font-weight").val("");e(this).closest(".md-tabcontent-row").find(".demo-font p").css("font-weight","");e(this).closest(".md-tabcontent-row").find(".demo-font p").css("font-style","")}else{n=n.split(",");var r="";for(var i=0;i<n.length;i++){r+='<option value="'+n[i]+'">'+s(n[i])+"</option>"}}var o=e(this).closest(".form-inline").find("select.choose-weight").html(r);var u=e(this).parents(".form-inline").find("input.font-weight").val("");if(t.val()==""||t.val()==undefined)e(this).closest(".md-tabcontent-row").find(".demo-font p").css("font-family","");else e(this).closest(".md-tabcontent-row").find(".demo-font p").css("font-family",t.val())});e(".choose-transform").change(function(){var t=e(this).find(":selected");if(t.val()=="none"||t.val()==undefined)e(this).closest(".md-tabcontent-row").find(".demo-font p").css("text-transform","");else e(this).closest(".md-tabcontent-row").find(".demo-font p").css("text-transform",t.val())});var t={"":"",Arial:"n4,n7,i4,i7",Verdana:"n4,n7,i4,i7","Trebuchet MS":"n4,n7,i4,i7",Georgia:"n4,n7,i4,i7","Times New Roman":"n4,n7,i4,i7",Tahoma:"n4,n7,i4,i7"};e("textarea[name='theme[font][google]']").on("change",function(){if(e(this).length){n(e(this).val())}});e("button.add-new-section").click(function(e){e.preventDefault();o("add_new","")});e(".section-edit").click(function(){var t=e(this).data();console.log(t.sectionId);o("edit",t.sectionId)});e(".js-show-popup").on("click",".new-section-save",function(t){t.preventDefault();var n=e(this).data();tinyMCE.triggerSave();var r=tinyMCE.get("add_new_textarea").getContent();var i=e("#popup-new-section").serialize();u(n.method,i)});e(".js-show-popup").on("click",".md-popup-close",function(t){t.preventDefault();e(".js-show-popup").fadeOut()});e(".js-show-popup").on("bind","#custom-new-section-background-color",function(){e(this).wpColorPicker({defaultColor:false,hide:true,palettes:true})});e(".section-del").click(function(){var t=e(this).data();alert("You sure delete this section?");e.ajax({type:"post",url:ajaxurl,data:{action:"awe_delete_section",section_key:t.sectionId},success:function(e){if(e==""){location.reload()}else{alert(e)}}})});e(".js-show-popup").on("click",".new-section-background-select",function(){if(e(this).val()=="parallax"){e(".select-color").fadeOut();e(".select-parallax").fadeIn()}else{e(".select-color").fadeIn();e(".select-parallax").fadeOut()}});e(".js-show-popup").on("click",".new-section-overlay-select",function(){if(e(this).val()=="pattern"){e(".select-overlay-color").fadeOut();e(".select-overlay-pattern").fadeIn()}else{e(".select-overlay-color").fadeIn();e(".select-overlay-pattern").fadeOut()}});e(".js-show-popup").on("click",".background_enable",function(){if(e(this).is(":checked")){e(".enable-background-parallax").fadeIn()}else{e(".enable-background-parallax").fadeOut()}});e(".js-show-popup").on("click",".overlay_enable",function(){if(e(this).is(":checked")){e(".enable-section-overlay").fadeIn()}else{e(".enable-section-overlay").fadeOut()}})})})(jQuery)